---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Contribute - Storybook Astro">
  <h1>Contribute</h1>
  <p>
    Storybook Astro is a community-driven project and contributions are welcome!
    Whether you're fixing a bug, adding a feature, or improving documentation, your help is appreciated.
  </p>

  <section>
    <h2>Getting Started</h2>
    <h3>Prerequisites</h3>
    <ul>
      <li><strong>Node.js</strong>: 20.16.0+, 22.19.0+, or 24.0.0+</li>
      <li><strong>Yarn</strong>: 4+ (Berry)</li>
    </ul>

    <h3>Dev Environment Setup</h3>
    <ol>
      <li>
      Fork the repo at <a href="https://github.com/lukemcd/storybook-astro">github.com/lukemcd/storybook-astro</a>, then clone your fork:
        <pre><code>git clone https://github.com/YOUR-USERNAME/storybook-astro.git
cd storybook-astro</code></pre>
        Or clone the main repo directly if you have write access:
        <pre><code>git clone https://github.com/lukemcd/storybook-astro.git</code></pre>
      </li>
      <li>
        Install dependencies:
        <pre><code>yarn install</code></pre>
      </li>
      <li>
        Start Storybook (dev mode):
        <pre><code>yarn storybook</code></pre>
      </li>
      <li>
        Run the Astro site:
        <pre><code>yarn dev</code></pre>
      </li>
    </ol>

    <h3>Running Tests</h3>
    <p>Run the full test suite before submitting a PR:</p>
    <pre><code>yarn test</code></pre>
    <p>
      All 17 test suites (36 tests) should pass, covering Astro, React, Vue, Svelte,
      Preact, Solid, and Alpine.js components.
    </p>
  </section>

  <section>
    <h2>Branching Strategy</h2>
    <ul>
      <li><strong><code>main</code></strong> — Stable, deployable branch. All releases are tagged from here.</li>
      <li><strong><code>develop</code></strong> — Integration branch for in-progress work. PRs merge here first.</li>
      <li><strong><code>feature/*</code></strong> — Feature branches off <code>develop</code> (e.g. <code>feature/vue-slots</code>)</li>
      <li><strong><code>fix/*</code></strong> — Bug fix branches off <code>develop</code></li>
      <li><strong><code>release/*</code></strong> — Release prep branches off <code>develop</code>, merged to <code>main</code> when ready</li>
    </ul>
    <h3>Workflow</h3>
    <ol>
      <li>Create a branch from <code>develop</code>: <code>feature/your-feature</code> or <code>fix/your-fix</code></li>
      <li>Make your changes and run <code>yarn test</code></li>
      <li>Open a PR targeting <code>develop</code></li>
      <li>Once reviewed and merged, it will be included in the next release</li>
    </ol>
  </section>

  <section>
    <h2>Code Conventions</h2>
    <ul>
      <li><strong>ES Modules only</strong> — All packages use <code>"type": "module"</code></li>
      <li><strong>Explicit file extensions</strong> — Use <code>.ts</code>, <code>.tsx</code>, <code>.js</code> in imports</li>
      <li><strong>Yarn 4+ workspaces</strong> — Use <code>workspace:*</code> for internal dependencies</li>
      <li><strong>TypeScript</strong> — Used throughout with proper types where possible</li>
    </ul>
  </section>

  <section>
    <h2>Adding a New Framework Integration</h2>
    <p>
      The project supports React, Vue, Svelte, Preact, Solid, and Alpine.js. To add a new
      framework, create an integration file in <code>packages/@storybook-astro/framework/src/integrations/</code>
      that implements the <code>Integration</code> interface. See the existing integrations for examples
      and the <a href="https://github.com/lukemcd/storybook-astro/blob/main/AGENTS.md">AGENTS.md</a>
      file for detailed guidance.
    </p>
  </section>

  <section>
    <h2>Resources</h2>
    <ul>
      <li><a href="https://github.com/lukemcd/storybook-astro/issues">GitHub Issues</a> — Report bugs or request features</li>
      <li><a href="https://github.com/lukemcd/storybook-astro/blob/main/AGENTS.md">AGENTS.md</a> — AI-assisted development guide</li>
      <li><a href="https://github.com/lukemcd/storybook-astro/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</a> — Full contributor guidelines</li>
    </ul>
  </section>
</Layout>

<style>
  section {
    margin-top: 2.5rem;
  }

  h2 {
    margin-bottom: 0.75rem;
  }

  h3 {
    font-size: 1.25rem;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
  }

  ul, ol {
    padding-left: 1.5rem;
    margin-bottom: 1rem;
  }

  li {
    margin-bottom: 0.5rem;
  }

  pre {
    background: #1a1a2e;
    color: #e0e0e0;
    padding: 1rem;
    border-radius: 8px;
    overflow-x: auto;
    margin: 0.75rem 0;
  }

  pre code {
    background: none;
    padding: 0;
    color: inherit;
  }

  code {
    background: #f4f4f4;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
  }
</style>
